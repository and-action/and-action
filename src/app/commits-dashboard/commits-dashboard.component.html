<div
  *ngIf="repositories$ | async as repositories; else loading"
  class="repositories"
>
  <ng-container *ngFor="let repository of repositories">
    <div class="repository">
      <div class="repository__head">
        <h2>
          <a [href]="repository.url" target="_blank" rel="noopener">
            {{ repository.name }}
          </a>
        </h2>
        <a
          [href]="repository.url"
          target="_blank"
          rel="noopener"
          class="repository__branch-name"
        >
          <svg class="repository__branch-icon">
            <use xlink:href="#icon-git-branch"></use>
          </svg>

          <span>{{ repository.defaultBranchRef.name }}</span>
        </a>
      </div>

      <div class="u-flex">
        <ana-commits-graph [commits]="repository.commits"></ana-commits-graph>
        <ana-commits-list [repository]="repository"></ana-commits-list>
      </div>
    </div>
  </ng-container>
</div>

<ng-template #loading>
  <mat-progress-spinner class="progress-spinner" mode="indeterminate">
  </mat-progress-spinner>
</ng-template>
